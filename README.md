# НекстАналитика - Django Backend

Бэкенд для сайта НекстАналитика на Django.

## Установка и запуск

### 1. Активация виртуального окружения

```bash
# Windows
.\env\Scripts\Activate.ps1

# или
.\env\Scripts\activate.bat
```

### 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 3. Применение миграций

```bash
python manage.py migrate
```

### 4. Создание суперпользователя

```bash
python manage.py createsuperuser
```

### 5. Запуск сервера разработки

```bash
python manage.py runserver
```

Сайт будет доступен по адресу: http://127.0.0.1:8000/

## Структура проекта

- `config/` - настройки Django проекта
- `content/` - публичные страницы (главная, о нас, контакты)
- `dashboards/` - дашборды и конфигуратор
- `cart/` - корзина покупок
- `blog/` - блог
- `core/` - общие утилиты
- `templates/` - HTML шаблоны
- `static/` - статические файлы (CSS, JS, изображения)

## API Endpoints

### Дашборды
- `GET /api/dashboards/` - список всех дашбордов
- `POST /api/price/calculate/` - расчет цены с учетом скидок

### Корзина
- `GET /cart/api/` - получение корзины
- `POST /cart/api/` - добавление элемента в корзину
- `PATCH /cart/api/item/<id>/` - обновление элемента корзины
- `DELETE /cart/api/item/<id>/` - удаление элемента из корзины
- `POST /cart/api/clear/` - очистка корзины
- `GET /cart/api/total/` - получение итоговой суммы корзины

## Начальная настройка данных

После создания суперпользователя зайдите в админ-панель (`/admin/`) и добавьте:

1. **Маркетплейсы** (Marketplace):
   - Wildberries (id: `Wildberries`)
   - OZON (id: `OZON`)

2. **Дашборды** (Dashboard):
   - Создайте дашборды с правилами скидок (DiscountRule)

3. **Информация о компании** (CompanyInfo):
   - Добавьте реквизиты и контакты

4. **Контент**:
   - FAQ
   - Преимущества (Benefit)
   - Типы продавцов (Persona)
   - Шаги процесса (ProcessStep)
   - Схема взаимодействия (SchemeFlow)
   - Метрики (SocialProofMetric)

5. **Блог**:
   - Категории блога (BlogCategory)
   - Статьи блога (BlogPost)

## Особенности

- Система скидок за объемы (количество месяцев, кабинетов, маркетплейсов)
- Корзина работает как для авторизованных, так и для неавторизованных пользователей (через сессии)
- Все цены рассчитываются с учетом скидок автоматически
- API полностью интегрирован с фронтендом

## Технологии

- Django 6.0
- Django REST Framework
- SQLite3 (для разработки)
- Pillow (для работы с изображениями)

